FROM python:3.12-slim

# Install PostgreSQL client
RUN apt-get update && apt-get install -y postgresql-client && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Install psycopg2-binary
RUN pip install --no-cache-dir psycopg2-binary==2.9.10

# Copy source files
COPY src/db_init.py ./src/
COPY src/sql/ ./src/sql/

# Run database initialization
CMD ["python", "src/db_init.py"]